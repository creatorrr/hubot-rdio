// Generated by CoffeeScript 1.4.0
(function() {
  var extend,
    __slice = [].slice,
    __hasProp = {}.hasOwnProperty;

  module.exports = function(robot) {
    return new function() {
      this.sockets = [];
      robot.on('sockets:connection', function(socket) {
        socket.on('event', function() {
          var args;
          args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
          return robot.emit.apply(robot, ['player:receive'].concat(__slice.call(args)));
        });
        return this.sockets.push(socket);
      });
      robot.on('player:send', function() {
        var args, socket, _i, _len, _ref, _results;
        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        _ref = this.sockets;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          socket = _ref[_i];
          _results.push(socket.emit.apply(socket, args));
        }
        return _results;
      });
      return this;
    };
  };

  extend = function() {
    var dest, key, sources, src, value, _i, _len;
    dest = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    for (_i = 0, _len = sources.length; _i < _len; _i++) {
      src = sources[_i];
      for (key in src) {
        if (!__hasProp.call(src, key)) continue;
        value = src[key];
        dest[key] = value;
      }
    }
    return dest;
  };

}).call(this);
